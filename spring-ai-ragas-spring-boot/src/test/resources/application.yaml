spring:
  ai:
    ragas:
      allure:
        enabled: true
        language: en
        include-prompts: true
        include-responses: true
        include-stack-traces: true
      # Multi-provider configuration
      providers:
        auto-detect-beans: false
        openai-compatible:
          - name: openrouter
            base-url: https://openrouter.ai/api
            api-key: ${OPENROUTER_API_KEY}
            # Chat models - optimized for price/quality ratio
            chat-models:
              - { id: deepseek/deepseek-v3.2 }        # Best price/quality, $0.38/1M completion
              - { id: google/gemini-3-flash-preview } # Fast, 1M context
              - { id: x-ai/grok-4.1-fast }            # 2M context, very cheap
              - { id: google/gemini-2.5-flash }
            # Embedding models
            embedding-models:
              - { id: openai/text-embedding-3-large, dimensions: 3072 }
              - { id: qwen/qwen3-embedding-8b, dimensions: 1024 }
              - { id: qwen/qwen3-embedding-4b, dimensions: 1024 }
              - { id: google/gemini-embedding-001, dimensions: 768 }
              - { id: baai/bge-m3, dimensions: 1024 }
              - { id: baai/bge-base-en-v1.5, dimensions: 768 }
          # cloud.ru Evolution
          # - name: cloudru
          #   base-url: https://foundation-models.api.cloud.ru/
          #   api-key: ${CLOUD_RU_API_KEY}
          #   chat-models:
          #     - { id: Qwen/Qwen3-235B-A22B-Instruct-2507 }
          #     - { id: openai/gpt-oss-120b }
          #     - { id: t-tech/T-pro-it-2.0 }
        default-provider:
          enabled: false
        default-options:
          temperature: 0.0
          max-tokens: 1000
          top-p: 1.0
        embedding-default-options:
          dimensions: 1024
    retry:
      on-http-codes: [ 429 ]
      on-client-errors: true
      backoff:
        initial-interval: 2000ms
        max-interval: 30000ms
        multiplier: 2
    # Default model for Spring AI autoconfiguration
    model:
      chat: openai
    openai:
      base-url: https://openrouter.ai/api
      api-key: ${OPENROUTER_API_KEY}
      chat:
        options:
          model: google/gemini-2.5-flash
          temperature: 0.0
      embedding:
        base-url: https://openrouter.ai/api
        api-key: ${OPENROUTER_API_KEY}
        options:
          model: openai/text-embedding-3-small
          dimensions: 1024
  threads:
    virtual:
      enabled: true
