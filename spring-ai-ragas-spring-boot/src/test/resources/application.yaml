spring:
  ai:
    retry:
      on-http-codes: [ 429 ]
      on-client-errors: true
      backoff:
        initial-interval: 2000ms
        max-interval: 30000ms
        multiplier: 2
    # выбор api стартера для работы - openai / gigachat
    model:
      chat: openai
    openai:
      base-url: https://openrouter.ai/api
      api-key: ${OPENROUTER_API_KEY}
      chat:
        options:
          model: google/gemini-2.5-flash
          temperature: 0.0
      embedding:
        base-url: https://openrouter.ai/api
        api-key: ${OPENROUTER_API_KEY}
        options:
          model: openai/text-embedding-3-small
          dimensions: 1024
    # Chat models configuration - optimized for price/quality ratio
    chat-models:
      default-options:
        temperature: 0.0
        max-tokens: 1000
        top-p: 1.0
      list:
        - { id: deepseek/deepseek-v3.2 }        # Best price/quality, $0.38/1M completion
        - { id: anthropic/claude-haiku-4.5 }    # Reliable anchor, excellent instruction following
        - { id: google/gemini-3-flash-preview } # Fast, 1M context
        - { id: x-ai/grok-4.1-fast }            # 2M context, very cheap
        - { id: google/gemini-2.5-flash }
    # Embedding models configuration
    embedding-models:
      default-options:
        dimensions: 1024
      list:
        # OpenAI embeddings
        - id: openai/text-embedding-3-large
          options: { dimensions: 3072 }
        # Qwen embeddings
        - id: qwen/qwen3-embedding-8b
        - id: qwen/qwen3-embedding-4b
        # Google embedding
        - id: google/gemini-embedding-001
          options: { dimensions: 768 }
        # BAAI embeddings
        - id: baai/bge-m3
        - id: baai/bge-base-en-v1.5
          options: { dimensions: 768 }
  threads:
    virtual:
      enabled: true