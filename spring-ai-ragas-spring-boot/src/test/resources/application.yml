# Spring AI RAGAS Test Configuration
# Profiles: openrouter (default), gigachat, all
# Note: cloudru profile requires service account with ml_inference_ai_marketplace role

spring.profiles.default: openrouter

spring.threads.virtual.enabled: true
spring.ai.chat.client.enabled: false

spring.ai.retry:
  on-http-codes: [429]
  on-client-errors: true
  backoff:
    initial-interval: 2000ms
    max-interval: 30000ms
    multiplier: 2

spring.ai.ragas.allure:
  enabled: true
  language: en
  include-prompts: true
  include-responses: true
  include-stack-traces: true

spring.ai.ragas.providers:
  default-provider:
    enabled: false
  default-options:
    temperature: 0.0
    max-tokens: 1000
    top-p: 1.0
  embedding-default-options:
    dimensions: 1024

---
spring.config.activate.on-profile: openrouter

spring.ai.ragas.providers:
  auto-detect-beans: false
  external-starters: {}
  openai-compatible:
    - name: openrouter
      base-url: https://openrouter.ai/api
      api-key: ${OPENROUTER_API_KEY}
      chat-models:
        - { id: deepseek/deepseek-v3.2 }
        - { id: google/gemini-3-flash-preview }
        - { id: x-ai/grok-4.1-fast }
        - { id: google/gemini-2.5-flash }
      embedding-models:
        - { id: openai/text-embedding-3-large, dimensions: 3072 }
        - { id: qwen/qwen3-embedding-8b, dimensions: 1024 }
        - { id: qwen/qwen3-embedding-4b, dimensions: 1024 }
        - { id: google/gemini-embedding-001, dimensions: 768 }
        - { id: baai/bge-m3, dimensions: 1024 }
        - { id: baai/bge-base-en-v1.5, dimensions: 768 }

spring.ai.openai:
  base-url: https://openrouter.ai/api
  api-key: ${OPENROUTER_API_KEY}
  chat.options:
    model: google/gemini-2.5-flash
    temperature: 0.0
  embedding:
    base-url: https://openrouter.ai/api
    api-key: ${OPENROUTER_API_KEY}
    options:
      model: openai/text-embedding-3-small
      dimensions: 1024

---
spring.config.activate.on-profile: gigachat

spring.ai.ragas.providers:
  auto-detect-beans: true
  external-starters:
    gigachat:
      chat-models:
        - GigaChat-2-Max
        - GigaChat-2-Pro
      embedding-models:
        - Embeddings
  openai-compatible: []

spring.ai.gigachat:
  auth:
    bearer:
      client-id: ${GIGACHAT_API_CLIENT_ID:}
      client-secret: ${GIGACHAT_API_CLIENT_SECRET:}
    scope: ${GIGACHAT_API_SCOPE:GIGACHAT_API_CORP}
    unsafe-ssl: true
  chat.options:
    model: GigaChat-2-Max
    temperature: 0.0
  embedding.options:
    model: Embeddings

---
spring.config.activate.on-profile: cloudru

spring.ai.ragas.providers:
  auto-detect-beans: false
  external-starters: {}
  openai-compatible:
    - name: cloudru
      base-url: https://foundation-models.api.cloud.ru
      api-key: ${CLOUD_RU_API_KEY}
      chat-models:
        - { id: t-tech/T-lite-it-1.0 }
        - { id: t-tech/T-pro-it-1.0 }
        - { id: GigaChat/GigaChat-2-Max }

spring.ai.openai:
  base-url: https://foundation-models.api.cloud.ru
  api-key: ${CLOUD_RU_API_KEY}
  chat.options:
    model: t-tech/T-lite-it-1.0
    temperature: 0.0

---
spring.config.activate.on-profile: all

spring.ai.ragas.providers:
  auto-detect-beans: true
  external-starters:
    gigachat:
      chat-models:
        - GigaChat-2-Max
        - GigaChat-2-Pro
      embedding-models:
        - Embeddings
  openai-compatible:
    - name: openrouter
      base-url: https://openrouter.ai/api
      api-key: ${OPENROUTER_API_KEY}
      chat-models:
        - { id: deepseek/deepseek-v3.2 }
        - { id: google/gemini-3-flash-preview }
        - { id: x-ai/grok-4.1-fast }
        - { id: google/gemini-2.5-flash }
      embedding-models:
        - { id: openai/text-embedding-3-large, dimensions: 3072 }
        - { id: qwen/qwen3-embedding-8b, dimensions: 1024 }
        - { id: qwen/qwen3-embedding-4b, dimensions: 1024 }
        - { id: google/gemini-embedding-001, dimensions: 768 }
        - { id: baai/bge-m3, dimensions: 1024 }
        - { id: baai/bge-base-en-v1.5, dimensions: 768 }

spring.ai.openai:
  base-url: https://openrouter.ai/api
  api-key: ${OPENROUTER_API_KEY}
  chat.options:
    model: google/gemini-2.5-flash
    temperature: 0.0
  embedding:
    base-url: https://openrouter.ai/api
    api-key: ${OPENROUTER_API_KEY}
    options:
      model: openai/text-embedding-3-small
      dimensions: 1024

spring.ai.gigachat:
  auth:
    bearer:
      client-id: ${GIGACHAT_API_CLIENT_ID:}
      client-secret: ${GIGACHAT_API_CLIENT_SECRET:}
    scope: ${GIGACHAT_API_SCOPE:GIGACHAT_API_CORP}
    unsafe-ssl: true
  chat.options:
    model: GigaChat-2-Max
    temperature: 0.0
  embedding.options:
    model: Embeddings
