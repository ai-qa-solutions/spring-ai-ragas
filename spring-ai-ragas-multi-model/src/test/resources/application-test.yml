spring:
  ai:
    retry:
      on-http-codes: [ 429 ]
      on-client-errors: true
      backoff:
        initial-interval: 2000ms
        max-interval: 30000ms
        multiplier: 2
    model:
      chat: openai
    openai:
      base-url: https://openrouter.ai/api
      api-key: ${OPENROUTER_API_KEY}
      chat:
        options:
          model: google/gemini-2.0-flash-001
          temperature: 0.0
      embedding:
        base-url: https://openrouter.ai/api
        api-key: ${OPENROUTER_API_KEY}
        options:
          model: openai/text-embedding-3-small
          dimensions: 1024

    # Multi-provider configuration
    ragas:
      providers:
        auto-detect-beans: false
        openai-compatible:
          # Provider 1: Premium tier
          - name: openrouter-premium
            base-url: https://openrouter.ai/api
            api-key: ${OPENROUTER_API_KEY}
            chat-models:
              - { id: anthropic/claude-3.5-sonnet }
              - { id: openai/gpt-4o }
              - { id: google/gemini-2.0-flash-exp }
              - { id: meta-llama/llama-3.3-70b-instruct }
            embedding-models:
              - { id: openai/text-embedding-3-large, dimensions: 3072 }
          # Provider 2: Efficient tier
          - name: openrouter-efficient
            base-url: https://openrouter.ai/api
            api-key: ${OPENROUTER_API_KEY}
            chat-models:
              - { id: anthropic/claude-3.5-haiku }
              - { id: openai/gpt-4o-mini }
              - { id: google/gemini-2.0-flash-001 }
              - { id: deepseek/deepseek-chat }
              - { id: qwen/qwen-2.5-72b-instruct }
            embedding-models:
              - { id: openai/text-embedding-3-small, dimensions: 1536 }
          # Provider 3: cloud.ru Evolution
          - name: cloudru
            base-url: https://foundation-models.api.cloud.ru
            api-key: ${CLOUD_RU_API_KEY}
            chat-models:
              - { id: Qwen/Qwen3-235B-A22B-Instruct-2507 }
              - { id: openai/gpt-oss-120b }
              - { id: t-tech/T-pro-it-2.0 }
        default-provider:
          enabled: false
          models: [ ]
        default-options:
          temperature: 0.0
          max-tokens: 1000
          top-p: 1.0
        embedding-default-options:
          dimensions: 1024
  threads:
    virtual:
      enabled: true