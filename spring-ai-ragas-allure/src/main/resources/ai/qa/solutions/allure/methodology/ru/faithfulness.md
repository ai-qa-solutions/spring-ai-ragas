# Метрика Faithfulness (Достоверность)

## Глоссарий

- **Контекст** — исходные данные, предоставленные агентной системе для формирования ответа
- **Галлюцинация** — утверждение в ответе, не подтверждённое контекстом
- **Агентная система** — система на основе LLM, генерирующая ответы

## Описание

Метрика оценивает фактическую согласованность ответа агентной системы с предоставленным контекстом. Ответ разбивается на отдельные утверждения, каждое из которых проверяется на наличие в контексте.

## Пример

**Контекст:** «Эйфелева башня была построена в 1889 году в Париже.»

**Ответ агентной системы:** «Эйфелева башня была построена в 1889 году. Она является самой высокой башней в мире.»

**Анализ утверждений:**
1. «Построена в 1889 году» → подтверждено контекстом
2. «Самая высокая башня в мире» → не подтверждено контекстом (галлюцинация)

**Скор:** 1/2 = **0.50 (50%)**

## Интерпретация скора

|  Скор   |                               Значение                               |
|---------|----------------------------------------------------------------------|
| 90-100% | Высокая достоверность — все утверждения подтверждены контекстом      |
| 70-90%  | Хорошая достоверность — большинство утверждений подтверждены         |
| 50-70%  | Средняя достоверность — присутствуют неподтверждённые утверждения    |
| 0-50%   | Низкая достоверность — значительная часть информации не подтверждена |

## Алгоритм

1. **Разбиение ответа** — LLM разбивает ответ на атомарные утверждения
2. **Верификация** — каждое утверждение проверяется на соответствие контексту
3. **Расчёт скора** — отношение подтверждённых утверждений к общему количеству

## Формула

```
score = verified_statements / total_statements
```

Где:
- `verified_statements` — количество утверждений, подтверждённых контекстом
- `total_statements` — общее количество утверждений в ответе

## Ссылки

- [Документация RAGAS](https://github.com/vibrantlabsai/ragas/blob/main/docs/concepts/metrics/available_metrics/faithfulness.md)
- [Оригинальная статья RAGAS](https://arxiv.org/abs/2309.15217)

