# Метрика Context Recall (Полнота контекста)

## Глоссарий

- **Контекст** — фрагменты информации, найденные системой поиска
- **Reference (эталон)** — ожидаемый правильный ответ на вопрос пользователя
- **Атрибуция** — наличие информации из эталона в контексте
- **Агентная система** — система на основе LLM, генерирующая ответы

## Описание

Метрика оценивает полноту найденного контекста относительно эталонного ответа. Эталон разбивается на отдельные предложения, каждое из которых проверяется на наличие в контексте. Если информация из эталона отсутствует в контексте, агентная система не сможет использовать её в ответе.

## Пример

**Reference (эталон):** «Эйфелева башня была построена в 1889 году. Она находится в Париже, Франция. Её спроектировал Гюстав Эйфель.»

**Контекст:** «Эйфелева башня была завершена в 1889 году для Всемирной выставки в Париже.»

**Проверка предложений эталона:**
1. «Построена в 1889 году» → найдено в контексте ✓
2. «Находится в Париже, Франция» → найдено в контексте ✓
3. «Спроектировал Гюстав Эйфель» → не найдено в контексте ✗

**Скор:** 2/3 = **0.67 (67%)**

## Интерпретация скора

|  Скор   |                           Значение                            |
|---------|---------------------------------------------------------------|
| 90-100% | Контекст содержит всю необходимую информацию из эталона       |
| 70-90%  | Большая часть информации из эталона присутствует в контексте  |
| 50-70%  | Часть ключевой информации отсутствует в контексте             |
| 0-50%   | Контекст не содержит значительную часть информации из эталона |

## Алгоритм

1. **Разбиение эталона** — эталонный ответ разбивается на отдельные предложения
2. **Проверка атрибуции** — LLM проверяет наличие каждого предложения в контексте
3. **Расчёт скора** — отношение найденных предложений к общему количеству

## Формула

```
score = attributed_sentences / total_sentences
```

Где:
- `attributed_sentences` — количество предложений эталона, найденных в контексте
- `total_sentences` — общее количество предложений в эталоне

## Ссылки

- [Документация RAGAS](https://github.com/vibrantlabsai/ragas/blob/main/docs/concepts/metrics/available_metrics/context_recall.md)

